version: 2

models:
  - name: V_STG_F_SLS_TXN_LN_ITM_B
    description: "Staging view for Sales Transaction Line Item Table"
    columns:
      - name: TXN_ID
        description: "Unique identifier in the source system for the transaction. The Robling ETL will join on this column."
        tests:
          - not_null
      - name: TXN_LN_ID
        description: "Unique identifier in the source system for the line item within the transaction. The Robling ETL will join on this column."
        tests:
          - not_null
      - name: POST_DT
        description: "Date when the record was posted to the source system (Sales Audit), Sometimes known as Business Date."
        tests:
          - not_null
      - name: VERSION_ID
        description: "For source systems that feed transaction deltas to Robling, the version ID tracks change history of columns in the table."
        tests:
          - not_null
      - name: TXN_TS
        description: "Timestamp when the transaction took place, in local time."
      - name: LOC_ID
        description: "Unique identifier in the source system for the Location. The Robling ETL will join on this column."
      - name: DMND_LOC_ID
        description: "Unique identifier in the source system for the Location where the demand initially occurred. For a fulfillment transaction, the location where the order was initially placed. For a return, the\ location where the item was originally sold.. The Robling ETL will join on this column."
      - name: ITM_ID
        description: "Unique identifier in the source system for the Item. The Robling ETL will join on this column."
      - name: RTRN_FLG
        description: "Indicates whether the transaction is sales or return"
      - name: REGISTER_ID
        description: "Unique identifier in the POS system for for the register that captured the transaction."
      - name: POS_TXN_NUM
        description: "Transaction Number generated by the POS system."
      - name: CO_ID
        description: "Unique identifier in the source system for the ecomm Customer Order associated with the sales transaction, if any. The Robling ETL will join on this column."
      - name: CO_LN_ID
        description: "Unique identifier in the source system for the ecomm Customer Order Line Item associated with the sales transaction, if any. The Robling ETL will join on this column."
      - name: RTRN_RSN
        description: "Code or Description reason for a return, such as Customer Appeasement, Defective Product, or Customer Changed Mind."
      - name: ITMLOC_STTS_CDE
        description: "Item location retail status code. Example 'R' and 'C'."
      - name: RTL_TYP_CDE
        description: "Reason code for the Price status under which the transaction was processed, such as Regular, Promotional or Clearance."
      - name: SELLING_UOM
        description: "Unit of measure for the item sold."
      - name: F_SLS_QTY
        description: "Quantity (in units) of items sold or returned."
      - name: F_SLS_RTL_LCL
        description: "Amount paid by the customer for product sold/returned, in local currency."
      - name: F_UNIT_RTL_LCL
        description: "Ticket unit price, in local currency."
      - name: F_TOT_DSC_AMT_LCL
        description: "Discount amount granted at POS inclusive of employee discount, in local currency."
      - name: F_EMP_DSC_AMT_LCL
        description: "Enployee discount amount, in local currency."
      - name: F_SLS_TAX_AMT_LCL
        description: "Total tax incurred by the transaction line item, in local currency."
      - name: LCL_CNCY_CDE
        description: "Local currency code"
    tests:
      # Test that the combination of the following columns is unique (i.e. forms the primary key)
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns: [TXN_ID, TXN_LN_ID, POST_DT, VERSION_ID]